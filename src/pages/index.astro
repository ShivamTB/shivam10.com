---
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import BaseHead from '../components/BaseHead.astro';
import Wordmark from '../components/Wordmark.astro';
import Footer from '../components/Footer.astro';
import { getCollection } from 'astro:content';

const writing = await getCollection('writing');
const photos = await getCollection('photos');
const projects = await getCollection('projects');
const quotes = await getCollection('quotes');
---

<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				const savedTheme = localStorage.getItem('theme') || 'theme1';
				document.body.classList.remove('theme1', 'theme2', 'theme3');
				document.body.classList.add(savedTheme);
				
				// Update button active states
				document.querySelectorAll('.theme-btn').forEach(btn => {
					btn.classList.remove('active');
					if (btn.getAttribute('data-theme') === savedTheme) {
						btn.classList.add('active');
					}
				});
			});
		</script>
		<!-- Theme Switcher -->
		<div class="fixed top-4 right-4 z-50 flex gap-2">
			<button onclick="localStorage.setItem('theme', 'theme1'); document.body.classList.remove('theme1', 'theme2', 'theme3'); document.body.classList.add('theme1'); window.location.reload();" class="theme-btn active" data-theme="theme1" title="Theme 1">
				<span class="w-3 h-3 rounded-full bg-gradient-to-r from-slate-800 to-slate-600"></span>
			</button>
			<button onclick="localStorage.setItem('theme', 'theme2'); document.body.classList.remove('theme1', 'theme2', 'theme3'); document.body.classList.add('theme2'); window.location.reload();" class="theme-btn" data-theme="theme2" title="Theme 2">
				<span class="w-3 h-3 rounded-full bg-purple-500"></span>
			</button>
			<button onclick="localStorage.setItem('theme', 'theme3'); document.body.classList.remove('theme1', 'theme2', 'theme3'); document.body.classList.add('theme3'); window.location.reload();" class="theme-btn" data-theme="theme3" title="Theme 3">
				<span class="w-3 h-3 rounded-full bg-amber-500"></span>
			</button>
		</div>
		<a href="#main" class="skip-link">Skip to content</a>
		<main id="main" class="container py-20 space-y-16" role="main">
			<section class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
				<div class="space-y-8">
					<div class="space-y-1">
						<p class="text-neutral-400 text-lg -mb-2">Hi, I am</p>
						<div class="inline-block">
							<Wordmark size={300} />
						</div>
					</div>
					<div class="space-y-6">
						<p class="text-neutral-200 text-xl">An engineer who writes and photographs. I also disappear into new countries, playlists, games, and code.</p>
						<p class="text-neutral-300 text-xl">This is where the things I've built, broken, and rebuilt find a voice. Stories from airports and algorithms, quiet lessons from friendships, and a restless pursuit of meaning in motion.</p>
						<p class="text-neutral-300 text-xl">Here you'll find fragments of life: some written, some captured, some still figuring themselves out.</p>
					</div>
				</div>
				
				<!-- Icons - Circular layout with coder in center -->
				<div class="flex justify-center lg:justify-end">
					<div class="relative w-64 h-64 flex items-center justify-center">
						<!-- Coder icon - Center, larger -->
						<svg viewBox="0 0 256 165" class="w-32 h-20 text-blue-400" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
							<path d="M240.4,72.5l-25.9,76.1h-39.3c0-9.8-7.4-17.1-17.7-17.1h-61c0,0-13.9-47.2-21.3-59.2C70.4,64.5,63,59.6,53.3,59.6l0,0c-15,0-26.3,12.4-34.5,30.3C8.8,111.7,3.1,137.6,2,163h217.5c3.1,0,5.9-2,6.9-5L254,77.1L240.4,72.5z M128,34.6c0,18-14.6,32.6-32.6,32.6c-18,0-32.6-14.6-32.6-32.6C62.8,16.6,77.4,2,95.4,2c2.1,0,4.1,0.2,6,0.6L94,18.5c-0.3,0-0.7-0.1-1-0.1c-7.6,0-13.8,6.2-13.8,13.8S85.4,46,93,46s13.8-6.2,13.8-13.8c0-3.7-1.5-7.1-3.9-9.6l7.9-16.8C121,11.4,128,22.2,128,34.6z"/>
						</svg>
						
						<!-- Camera icon - Top -->
						<div class="absolute -top-6 left-1/2 transform -translate-x-1/2">
							<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-16 h-16 text-blue-400" fill="currentColor">
								<path d="M19,6.5H17.72l-.32-1a3,3,0,0,0-2.84-2H9.44A3,3,0,0,0,6.6,5.55l-.32,1H5a3,3,0,0,0-3,3v8a3,3,0,0,0,3,3H19a3,3,0,0,0,3-3v-8A3,3,0,0,0,19,6.5Zm1,11a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1v-8a1,1,0,0,1,1-1H7a1,1,0,0,0,1-.68l.54-1.64a1,1,0,0,1,.95-.68h5.12a1,1,0,0,1,.95.68l.54,1.64A1,1,0,0,0,17,8.5h2a1,1,0,0,1,1,1Zm-8-9a4,4,0,1,0,4,4A4,4,0,0,0,12,8.5Zm0,6a2,2,0,1,1,2-2A2,2,0,0,1,12,14.5Z"></path>
							</svg>
						</div>
						
						<!-- Code icon - Right -->
						<!-- Music icon - Left -->
						<div class="absolute -left-6 top-1/2 transform -translate-y-1/2">
							<svg viewBox="0 0 24 24" class="w-16 h-16 text-blue-400" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M9 19C9 20.1046 7.65685 21 6 21C4.34315 21 3 20.1046 3 19C3 17.8954 4.34315 17 6 17C7.65685 17 9 17.8954 9 19ZM9 19V5L21 3V17M21 17C21 18.1046 19.6569 19 18 19C16.3431 19 15 18.1046 15 17C15 15.8954 16.3431 15 18 15C19.6569 15 21 15.8954 21 17ZM9 9L21 7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
						</div>
						<div class="absolute -right-6 top-1/2 transform -translate-y-1/2">
							<svg viewBox="0 0 40 24" class="w-16 h-10 text-blue-400" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
								<path d="M8 2 L2 12 L8 22" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
								<path d="M24 2 L16 22" stroke="currentColor" stroke-width="4" stroke-linecap="round" fill="none"/>
								<path d="M32 2 L38 12 L32 22" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
							</svg>
						</div>
						
						<!-- Game controller icon - Bottom -->
						<div class="absolute -bottom-6 left-1/2 transform -translate-x-1/2">
							<svg viewBox="0 0 20 20" class="w-16 h-16 text-blue-400" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
								<g transform="translate(-140, -4719)">
									<g transform="translate(56, 160)">
										<path d="M86,4577 L102,4577 L102,4569 L86,4569 L86,4577 Z M104,4567 L104,4569 L104,4577 L104,4579 L102,4579 L86,4579 L84,4579 L84,4577 L84,4569 L84,4567 L86,4567 L93,4567 L93,4563 L93,4561 L98,4561 L98,4559 L100,4559 L100,4561 L100,4563 L95,4563 L95,4567 L102,4567 L104,4567 Z M98,4574 L100,4574 L100,4572 L98,4572 L98,4574 Z M95,4574 C95.552,4574 96,4573.552 96,4573 C96,4572.448 95.552,4572 95,4572 C94.448,4572 94,4572.448 94,4573 C94,4573.552 94.448,4574 95,4574 L95,4574 Z M88,4572 L89,4572 L89,4571 L91,4571 L91,4572 L92,4572 L92,4574 L91,4574 L91,4575 L89,4575 L89,4574 L88,4574 L88,4572 Z"/>
									</g>
								</g>
							</svg>
						</div>
					</div>
				</div>
			</section>
		
		<!-- Sections below -->
		<div class="container py-16 space-y-16">
			<section id="writing" class="space-y-4">
				<h2>Writing & Reflections</h2>
				<ul class="space-y-1">
					{writing.slice(0, 4).map((p) => (
						<li>
							<a href={`/writing/${p.id}/`} class="group inline-space-y-1 no-underline">
								<span class="text-neutral-400 group-hover:text-neutral-200">{p.data.title}</span>
								<span class="text-neutral-600 group-hover:text-neutral-400">{p.data.pubDate.toLocaleDateString()}</span>
							</a>
						</li>
					))}
				</ul>
			</section>

			<section id="projects" class="space-y-4">
				<h2>Projects</h2>
				<ul class="space-y-1">
					{projects.slice(0, 4).map((p) => (
						<li>
							<a href={`/projects/${p.id}/`} class="group inline-space-y-1 no-underline">
								<span class="text-neutral-400 group-hover:text-neutral-200">{p.data.title}</span>
								<span class="text-neutral-600 group-hover:text-neutral-400">{p.data.started?.toLocaleDateString() || 'No date'}</span>
							</a>
						</li>
					))}
				</ul>
			</section>

			<section id="photos" class="space-y-4">
				<h2>Photos</h2>
				<ul class="space-y-1">
					{photos.slice(0, 4).map((p) => (
						<li>
							<a href={`/photos/${p.id}/`} class="group inline-space-y-1 no-underline">
								<span class="text-neutral-400 group-hover:text-neutral-200">{p.data.title}</span>
								<span class="text-neutral-600 group-hover:text-neutral-400">{p.data.shotDate?.toLocaleDateString() || 'No date'}</span>
							</a>
						</li>
					))}
				</ul>
			</section>

			<section id="quotes" class="space-y-4">
				<h2>Quotes</h2>
				<ul class="space-y-1">
					{quotes.slice(0, 4).map((p) => (
						<li>
							<a href={`/quotes/${p.id}/`} class="group inline-space-y-1 no-underline">
								<span class="text-neutral-400 group-hover:text-neutral-200">{p.data.text}</span>
								<span class="text-neutral-600 group-hover:text-neutral-400">{p.data.date?.toLocaleDateString() || 'No date'}</span>
							</a>
						</li>
					))}
				</ul>
			</section>
		</div>
		</main>
		<Footer />
	</body>
</html>
